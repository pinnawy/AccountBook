<?xml version="1.0"?>
<configuration>
	<configSections>
		<section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
	</configSections>
	
	<connectionStrings>
		<add name="DBConnection" connectionString="AccountBook.db3;"/>
	</connectionStrings>

	<!--log4net-->
	<log4net>
		<logger name="AccountBookLog">
			<level value="ALL"/>
			<appender-ref ref="RollingFile"/>
		</logger>
		<appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
			<file value="Logs/ElpAppLog.log"/>
			<appendToFile value="true"/>
			<rollingStyle value="Date"/>
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%d %-4r [%t] %-5p %c %x - %m%n%n"/>
			</layout>
		</appender>
	</log4net>
	
	<!--unity-->
	<unity>
		<typeAliases>
			<typeAlias alias="singleton" type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager, Microsoft.Practices.Unity"/>
			<typeAlias alias="string" type="System.String"/>
		</typeAliases>

		<containers>
			<!-- BLL-->
			<container name="BllContainer">
				<types>
					<type type="AccountBook.Bll.Interface.IUserBll, AccountBook.Bll" mapTo="AccountBook.Bll.Impl.UserBll, AccountBook.Bll">
						<lifetime type="singleton"/>
					</type>

					<type type="AccountBook.Bll.Interface.IConsumeRecordBll, AccountBook.Bll" mapTo="AccountBook.Bll.Impl.ConsumeRecordBll, AccountBook.Bll">
						<lifetime type="singleton"/>
					</type>

					<type type="AccountBook.Bll.Interface.IConsumeTypeBll, AccountBook.Bll" mapTo="AccountBook.Bll.Impl.ConsumeTypeBll, AccountBook.Bll">
						<lifetime type="singleton"/>
					</type>
				</types>
			</container>

			<!-- DAL -->
			<container name="DalContainer">
				<types>
					<type type="AccountBook.Dal.Interface.IUserDal, AccountBook.Dal" mapTo="AccountBook.Dal.Impl.UserDal, AccountBook.Dal">
						<lifetime type="singleton"/>
					</type>
					
					<type type="AccountBook.Dal.Interface.IConsumeRecordDal, AccountBook.Dal" mapTo="AccountBook.Dal.Impl.ConsumeRecordDal, AccountBook.Dal">
						<lifetime type="singleton"/>
					</type>

					<type type="AccountBook.Dal.Interface.IConsumeTypeDal, AccountBook.Dal" mapTo="AccountBook.Dal.Impl.ConsumeTypeDal, AccountBook.Dal">
						<lifetime type="singleton"/>
					</type>
				</types>
			</container>
		</containers>
	</unity>

	<startup useLegacyV2RuntimeActivationPolicy="true">
		<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
	</startup>

</configuration>
